#!/bin/bash

# Install by url
# curl 'https://raw.github.com/evanmoran/.files/master/.ubuntu' | bash

# Run auto echos
function run { echo -e "[$@]"; $@; }

function apt_install {
  echo -n "Install $1 (with apt-get): "

  (run dpkg --get-selections | grep "^$1\s" > /dev/null) && (echo "Already Installed") || (run sudo apt-get --yes install $1)
}

function npm_install {
  echo -n "Install $1 (with npm): "
  (run npm list -g | grep $1 > /dev/null) && echo "Already Installed"
  (run npm list -g | grep $1 > /dev/null) || (run sudo npm install -g $1)
}

function apt_search_starts_with {
  (run apt-cache search "$1" | grep "^$1")
}

##############################################################
# Install apps
##############################################################

apt_install zsh
apt_install git
apt_install nodejs
apt_install mongodb
apt_install ack
apt_install python
apt_install ruby
apt_install tree
apt_install p7zip

echo "Install npm (with curl)"
(which npm > /dev/null) || (curl https://npmjs.org/install.sh | sudo sh)

##############################################################
# Install npm apps
##############################################################

npm_install "coffee-script"         # Javascript templating
npm_install "node-dev"              # Auto node restarting
npm_install "mocha"                 # Node test framework
npm_install "groc"                  # Documentation generator

